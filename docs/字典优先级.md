## 🔄 字典优先级

### **优先级顺序（从高到低）**
1. **`custom_xxx`** - 自定义字典（最高优先级）
2. **`polyphone_xxx`** - 多音字规则
3. **`common_xxx`** - 常用字典
4. **`rare_xxx`** - 生僻字字典
5. **`unihan_xxx`** - unicode 扩展字典 （最低优先级） 
6. **自学习字典** → 默认不加载，仅作为常用字典和生僻字字典转换的媒介，仅在后台任务继续转换合并时加载

## 🔧 主要修改内容

### 1. **`getAllPinyinOptions()` 方法**
- 调整了字典查询顺序
- 自定义字典现在具有最高优先级
- 多音字规则在自定义字典之后检查

### 2. **`getCharPinyin()` 方法**
- 自定义字典优先级提升到第二（仅次于临时映射）
- 多音字规则优先级调整为第三

### 3. **新增 `getOtherPinyinOptions()` 方法**
- 用于多音字规则匹配时获取其他字典的拼音选项
- 排除自定义字典，避免循环依赖

### 4. **预加载配置优化**
```php
'preload_priority' => ['custom', 'self_learn', 'common'], // 按优先级预加载
'lazy_dicts' => ['rare'] // 仅生僻字字典懒加载
```

## 🎯 优先级逻辑说明

### **拼音转换流程**
1. **临时映射** → 最高优先级（特殊处理）
2. **自定义字典** → 用户自定义的拼音优先
3. **多音字规则** → 根据上下文智能选择拼音
4. **常用字典** → 标准拼音库
5. **生僻字字典** → 生僻字拼音库
6. **unihan字典** → unicode官方权威拼音库
7. **基础映射表** → 最后的兜底方案
8. **自学习字典** → 基于使用频率从rare ,unihan字典智能学习

### **性能优化**
- **预加载**：`custom`、`self_learn`、`common` 字典
- **懒加载**：`rare` 字典（按需加载）
- **智能缓存**：高频字典常驻内存

现在拼音转换工具会严格按照你要求的优先级顺序处理拼音，确保自定义配置和多音字规则得到正确的优先级处理。