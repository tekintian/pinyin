# 字典注释策略优化

### 注释保留策略

| 文件类型 | 注释策略 | 原因 |
|----------|----------|------|
| `polyphone_rules.php` | ✅ **保留注释** | 人工编辑的多音字规则，注释包含有用的说明和示例 |
| `custom_*.php` | ❌ **移除注释** | 注释与实际内容完全重复，没有意义 |
| `self_*.php` | ❌ **无注释** | 自学习字典，自动生成，无需注释 |
| `rare_*.php` | ❌ **保留文件头注释** | 生僻字字典，只有生成信息的文件头注释 |

### 优化效果

**优化前的问题：**
```php
'互联网' => ['hu lian wang'], // 互联网 - hù lián wǎng  // 重复无意义
```

**优化后的格式：**
```php
'互联网' => ['hu lian wang'],  // 简洁清晰
```

**polyphone_rules.php 保留有用注释：**
```php
/**
 * 多音字规则模板（紧凑友好格式，单规则一行，方便修改）
 * 注意本规则里面记录的多音字的拼音是 非默认读音的规则, 和特殊的多音字规则
 */
return [
    '为' => [
        ['type' => 'post', 'char' => '为', 'pinyin' => 'wéi'], // 因为  yīn wèi
        ['type' => 'post', 'char' => '为', 'pinyin' => 'xíng'], // 行为  xíng wéi
    ],
];
```

### 智能保存逻辑

保存策略已经优化：

1. **polyphone_rules.php**：使用 `DictionaryPreservationHelper` 保留注释
2. **custom_*.php**：使用 `CustomDictPreservationHelper` 不保留注释
3. **其他字典**：使用紧凑格式，无注释

### 性能提升

- ✅ 减少了文件大小（移除冗余注释）
- ✅ 提高了可读性（简洁的格式）
- ✅ 保持了必要的文档说明（多音字规则）
- ✅ 避免了不必要的保存操作（智能内容比较）

### 文件状态

| 文件 | 注释状态 | 格式 | 备注 |
|------|----------|------|------|
| `data/polyphone_rules.php` | ✅ 保留完整注释 | 紧凑友好 | 人工编辑，包含有用说明 |
| `data/custom_no_tone.php` | ❌ 无注释 | 紧凑格式 | 98个常见词汇 |
| `data/custom_with_tone.php` | ❌ 无注释 | 紧凑格式 | 98个常见词汇（带声调） |
| `data/self_learn_*.php` | ❌ 无注释 | 紧凑格式 | 自学习字典 |
| `data/rare_*.php` | ❌ 仅文件头注释 | 紧凑格式 | 生僻字字典 |

---

**总结**：现在的注释策略更加合理，只在真正需要的地方保留注释（多音字规则），其他字典使用简洁的紧凑格式，既提高了可读性又减少了冗余信息。